<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>购物车 | YOHO!BUY 有货-潮流服饰购物网站,中国时尚潮流购物风向标</title>
    <meta name="keywords" content="潮流,时尚潮流,潮流服饰,潮流购物网,潮流网站">
    <meta name="description"



          .   b
          content="【YOHO!BUY有货】，年轻人潮流购物中心，中国潮流商品购物网站。作为YOHO!旗下的购物平台，汇集了全球潮流时尚商品和国内流行商品，★全场品牌正品保证，支持货到付款★">

    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta http-equiv="cleartype" content="on">
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta content="telephone=no" name="format-detection"/>
    <meta content="email=no" name="format-detection"/>
    <meta name="applicable-device" content="pc">
    <link rel="alternate" media="only screen and(max-width: 640px)" href="//m.yohobuy.com/cart/cart">
    <meta name="mobile-agent" content="format=html5;url=//m.yohobuy.com/cart/cart">


    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/cart.css">
</head>
<body>
<div class="simple-header">
    <div class="header-inner clearfix">
        <h2 class="logo">
            <a href="../index.html">
                <img src="//static.yohobuy.com/newheader/img/logo_e.png?imageView2/2/interlace/1/q/75" alt="">
            </a>
        </h2>
        <ul class="header-tool clearfix">
            <li>
                <span>Hi~</span>

                <a href="login.html">[请登录]</a>


                <a href="reginster.html">[免费注册]</a>
            </li>
            <li class="tool-options">
                <span><a href="#">MY有货</a></span>
                <i class="options-icon down iconfont">&#xe610;</i>
                <i class="options-icon up iconfont">&#xe615;</i>
                <div class="tool-select">
                    <a href="#">我的收藏</a>
                    <a href="#">优惠券</a>
                </div>
            </li>
            <li>
                <a href="#">订单中心</a>
            </li>
            <li class="tool-options tool-options-large">
                <span><a href="#">客户服务</a></span>
                <i class="options-icon down iconfont">&#xe610;</i>
                <i class="options-icon up iconfont">&#xe615;</i>
                <div class="tool-select">
                    <a href="#">在线客服</a>
                    <a href="#">帮助中心</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<div class="shop-cart yoho-page clearfix">
    <div class="order-edit order-cart" id="cart-page">
        <div class="order-title cart-page-title order-ensure-title">
            <ul class="shopping-step">
                <li class="step first focus">查看购物车</li>
                <li class="step">填写订单</li>
                <li class="step last">付款，完成购买</li>
            </ul>
        </div>
        <div class="cartnew-tips">
            <div class="tipsbox" id="tipsbox">
                <a href="javascript:void(0);" class="btn-close" title="关闭"></a>
                <strong>温馨提示：</strong>1. 选购单中的商品不保留库存，请及时结算。 2. 商品的价格、相关活动信息及库存以订单提交时为准。
            </div>
        </div>
        <div class="order-pay" id="Y_CartListWrap">
            <!-- 购物车商品列表 -->
            <div class="pay-wapper" data-role="order-cart">
                <div class="shop-cart-empty hide">
                    <i class="iconfont"></i>
                    <p>购物车空空的哦，去看看心仪的商品吧~</p>
                    <a href="special.html">去购物</a>
                </div>
                <div class="cart-title">
                    <p class="left" style="width:6%;">
                        <i class="cart-item-check-title cart-item-check iconfont"></i>&nbsp;&nbsp;全选
                    </p>
                    <p style="width:35%">商品信息</p>
                    <p style="width:14%">单价</p>
                    <p style="width:15%;">数量</p>
                    <p style="width:16%;">小计</p>
                    <p class="right" style="width:11.8%;">操作</p>
                </div>


                <div data-role="ordinary" id="pool-box">

                </div>

                <!-- 总价计算 -->
                <div class="cart-fixed-submit">
                    <div class="cart-fixed-wrap">
                        <div class="center-content clearfix">
                            <div class="fixed-option">
                                <i class="cart-item-check iconfont" id="cbSelAllGoods"></i>
                                <span class="check-all-sum">全选</span>
                                <a class="delAll delete-all-sel" href="javascript:void(0);">删除选中商品</a>
                                <a class="removeAll remove-all-2fav" href="javascript:void(0);">移入收藏夹</a>
                                <a class="emptyDisabled clean-all-disable"
                                   href="javascript:void(0);">清空失效商品</a>
                            </div>
                            <p class="select-num">已选商品<strong class="ins">5</strong>件</p>
                            <div class="price-sum">
                                <p class="sum">应付金额（不含邮费）：<strong><kbd>¥</kbd> 10697.12</strong></p>
                            </div>
                            <a href="order-ensure.html" id="Y_SubmitBtn" class="btn-account right"
                            >去结算</a>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>


    <div class="loading loading-single"><span></span>请稍后...</div>

</div>

<div class="yoho-footer">
    <div class="footerbottom">
        <div class="promise">
            <div class="center-content clearfix">
                <div class="left">
                    <span class="iconfont rgbf">&#xe604;</span>
                    <span class="red">100%</span>
                    <span class="rgbf">品牌正品</span>
                </div>
                <div class="left">
                    <span class="iconfont rgbf">&#xe603;</span>
                    <span class="red">7天</span>
                    <span class="rgbf">无理由退换货</span>
                </div>
                <div class="left">
                    <span class="iconfont rgbf">&#xe602;</span>
                    <a href="#" target="_blank" rel="nofollow">
                        <span class="red">便捷</span>
                        <span class="rgbf">在线客服</span>
                    </a>
                </div>
                <div class="right subscribe footer-right">
                    <input id="subscriber-box" class="rgb6 top" name="subscriberBox" value="订阅我们的邮件">
                    <a id="subscriber-btn" href="javascript:void(0);" class="iconfont rgbf">&#xe601;</a>
                </div>
            </div>
        </div>
        <div class="footer-help">
            <div class="center-content clearfix">
                <div class="left">
                    <ul class="clearfix">
                        <li class="left">
                            <p>
                                <span>新手专区</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">注册登录</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">购物结算</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">下单支付</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">收货评价</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>会员中心</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">会员制度</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">会员优惠</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">账户管理</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">密码管理</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>购物指南</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">发票</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">尺码对照</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">尺码解读</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">商品咨询</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>支付方式</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">在线支付</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">货到付款</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">分期支付</a>
                            </p>
                            <p>
                                <a href="#" target="_blank"
                                   rel="nofollow">优惠券、有货币</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>配送方式</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">配送说明</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">运费说明</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">验货签收</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">收货样品</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>售后服务</span>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">退换货政策</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">退换货流程</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">投诉与建议</a>
                            </p>
                            <p>
                                <a href="//www.yohobuy.com/service/client" target="_blank" rel="nofollow">在线客服</a>
                            </p>
                        </li>
                        <li class="left">
                            <p>
                                <span>APP常见问题</span>
                            </p>
                            <p>
                                <a href="#" target="_blank"
                                   rel="nofollow">IPhone版</a>
                            </p>
                            <p>
                                <a href="#" target="_blank"
                                   rel="nofollow">Android版</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">wap版</a>
                            </p>
                            <p>
                                <a href="#" target="_blank" rel="nofollow">IPAD版</a>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-link">
            <div class="center-content clearfix">
                <div class="about-us">
                    <div class="left-flag">
                        <a class='govicon'
                           href="http://www.jsdsgsxt.gov.cn/mbm/entweb/elec/certView.shtml?siteId=f2b6e3b8d18241afb8dd6cadf7f15406"
                           target="_blank" rel="nofollow">
                            <div class="govimg"></div>
                        </a>
                        <a href="https://ss.knet.cn/verifyseal.dll?sn=e14021832010046477dka7000000&amp;ct=df&amp;a=1&amp;pa=0.5902942178957805"
                           target="_blank" rel="nofollow">
                            <img src="//static.yohobuy.com/images/v3/icon/credit-flag3.png?imageView2/2/interlace/1/q/75">
                        </a>
                        <a href="http://www.isc.org.cn/" target="_blank" rel="nofollow">
                            <img src="//static.yohobuy.com/images/v3/icon/isc2.png?imageView2/2/interlace/1/q/75">
                        </a>
                    </div>
                    <p class="links">
                        <a href="#" rel="nofollow">返回首页</a>
                        <span>|</span>
                        <a href="#" rel="nofollow">YOHO!BUY 有货</a>
                        <span>|</span>
                        <a href="#l" rel="nofollow">新力传媒</a>
                        <span>|</span>
                        <a href="#" rel="nofollow">联系我们</a>
                        <span>|</span>
                        <a href="#" rel="nofollow">商家入驻</a>
                        <span>|</span>
                        <a href="#" rel="nofollow">隐私条款</a>
                        <span>|</span>
                        <a href="#" rel="nofollow">友情链接</a>
                        <span>|</span>
                        <a href="#">潮流品牌大全</a>
                        <span>|</span>
                        <a href="#">潮流品类大全</a>
                        <span>|</span>
                        <a href="#">潮流产品大全</a>
                        <span>|</span>
                        <a href="#">潮流资讯</a>
                        <span>|</span>
                        <a href="#">穿衣搭配(男生版)</a>
                        <span>|</span>
                        <a href="#">穿衣搭配(女生版)</a>
                        <span>|</span>
                        <a href="#">潮流人气</a>
                        <span>|</span>
                        <a href="#">潮流潮品</a>
                        <span>|</span>
                        <a href="#">潮流视频</a>
                        <span>|</span>
                        <a class="police" target="_blank"
                           href="#"
                           rel="nofollow">苏公网安备 32010502010132号</a>
                    </p>
                </div>
                <div class="copyright">
                    <p></p>
                    <p>
                        CopyRight © 2007-2018 南京新与力文化传播有限公司
                        <a class="rbg6" href="#" target="_blank"
                           rel="nofollow">苏ICP备09011225号</a>
                        NewPower Co. 版权所有 经营许可证编号：苏B2-20120395
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="right-floating-layer hide">
        <div class="qrcode-hover-box">
            <a class="layer-box qrcode-download-right" href="javascript:void(0);" target="_blank">
                <span class="qrcode-img">&nbsp;</span>
            </a>
            <div class="download-app-box">
                <div class="download-app-left">
                    <div class="qr-code-img we-chat-code">
                        <img src="//img12.static.yhbimg.com/evidenceImages/2017/11/14/10/02c21ad1b55c13f8bcd9ae5b643c3c2374.png">
                    </div>
                    <h5 class="qr-words">微信扫一扫</h5>
                    <h5 class="qr-words">关注公众号，赢免单</h5>
                </div>
                <div class="download-app-right">
                    <div class="qr-code-img mobile-code">
                        <img src="//img11.static.yhbimg.com/evidenceImages/2017/11/14/10/01dce3f4c011e664dcfed9cd836377aeb7.png">
                    </div>
                    <h5 class="qr-words">下载手机客户端</h5>
                    <h5 class="qr-words qr-more">
                        <a href="javascript:void(0);" target="_blank">更多客户端下载</a>
                    </h5>
                </div>
            </div>
        </div>
        <div class="layer-box return-top">
            <span class="iconfont">&#xe607;</span>
        </div>
    </div>
</div>


<script src="../lib/jquery.js"></script>
<script src="../lib/lazyload.js"></script>
<script src="../js/common.js"></script>
<script>
    $(function () {
        //请求数据
        let data = "";
        let totalNum = 0;
        let totalPrice = 0;
        $.ajax({
            url: "../data/data.json",
            type: "GET",
            cache: false,
            async: false,
            dataType: "json",
            success: function (res) {
                data = res;
            },
            error: function (err) {
                console.log(err)
            }
        });

        //得到购物车的数据
        function getCar() {
            //从cookie之中取到购物车之中的内容;
            let carListString = localStorage.getItem("carList");
            let carListArray = JSON.parse(carListString);
            console.log(carListArray);
            let carArray = [];
            for (let i = 0; i < carListArray.length; i++) {
                // console.log(carListArray[i].id)
                let itemId = carListArray[i].id;//购物车中商品的id;
                //获取对应的数据对象
                let itmeobj = fromIdToItem(itemId, data.data["1"]);
                //向结构中放入商品数量;
                itmeobj.num = carListArray[i].num;
                carArray.push(itmeobj);
            }
            renderPage(carArray);
        }

        //通过id在json数组中找到对应id的 对象，并返回这个对象;
        function fromIdToItem(id, json) {
            // console.log(id,json);
            for (let i = 0; i < json.length; i++) {
                if (json[i].id === id) {
                    return json[i]
                }
            }
        }

        //渲染页面
        function renderPage(data) {

            if (data === "") {
                $(".shop-cart-empty").removeClass("hide");
                return 0;
            }


            for (let i = 0; i < data.length; i++) {

                totalNum += parseInt(data[i].num);

                totalPrice += parseInt(data[i].num) * parseInt(data[i].price.trim().split("¥")[1]);


                let template = "";
                if (data[i].num === 1 || data[i].num === "1") {
                    template = `  <div class="promotion-pool">
                        <div class="cart-table">
                            <ul class="table table-group">
                                <li class="pre-sell-box tr active">
                                    <div class="pay-pro td " style="width: 368px;">
                                        <i class="cart-item-check iconfont cart-item-checked"
                                           checked></i>
                                        <a class="pay-pro-icon"
                                           data-role="item-img"
                                           href="detail.html?id=${data[i].id}" target="_blank">
                                            <img src="${data[i].img[0]}?imageMogr2/thumbnail/64x88/background/d2hpdGU&#x3D;/position/center/quality/90">
                                        </a>
                                        <p class="pay-pro-info">
                                            <a href="detail.html?id=${data[i].id}" target="_blank"
                                               data-role="item-title">
                                                ${data[i].name}
                                            </a>

                                        </p>
                                    </div>
                                    <div class="product-price td " style="width:148px;">
                                        <p class="p-product-price"> ${data[i].price}</p>
                                    </div>
                                    <div style="width:128px;" class="adjust-cart-num td">
                                        <div class="cart-num-cont">
                                            <span class="minus cart-num-btn
                                                        disabled">
                                                <i class="iconfont icon-minus"></i>
                                            </span>
                                            <input type="text" value="${data[i].num}" readonly="readonly"/>
                                            <span class="plus cart-num-btn "><i class="iconfont icon-plus"></i></span>
                                        </div>

                                        <p class="tip-message "></p>
                                    </div>
                                    <div style="width:160px;" class="sub-total red td">
                                        ${data[i].price}
                                    </div>
                                    <div style="width:100px;" class="cart-operation td">
                                        <span class="cart-del-btn" data-role="cart-del-btn">删除</span>
                                        <span class="cart-col-btn" data-role="cart-mov2fav-btn">移入收藏</span>
                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>`;
                }
                else {
                    template = `  <div class="promotion-pool">
                        <div class="cart-table">
                            <ul class="table table-group">
                                <li class="pre-sell-box tr active">
                                    <div class="pay-pro td " style="width: 368px;">
                                        <i class="cart-item-check iconfont cart-item-checked"
                                           checked></i>
                                        <a class="pay-pro-icon"
                                           data-role="item-img"
                                           href="detail.html?id=${data[i].id}" target="_blank">
                                            <img src="${data[i].img[0]}?imageMogr2/thumbnail/64x88/background/d2hpdGU&#x3D;/position/center/quality/90">
                                        </a>
                                        <p class="pay-pro-info">
                                            <a href="detail.html?id=${data[i].id}" target="_blank"
                                               data-role="item-title">
                                                ${data[i].name}
                                            </a>

                                        </p>
                                    </div>
                                    <div class="product-price td " style="width:148px;">
                                        <p class="p-product-price"> ${data[i].price}</p>
                                    </div>
                                    <div style="width:128px;" class="adjust-cart-num td">
                                        <div class="cart-num-cont">
                                            <span class="minus cart-num-btn
                                                        ">
                                                <i class="iconfont icon-minus"></i>
                                            </span>
                                            <input type="text" value="${data[i].num}" readonly="readonly"/>
                                            <span class="plus cart-num-btn "><i class="iconfont icon-plus"></i></span>
                                        </div>

                                        <p class="tip-message "></p>
                                    </div>
                                    <div style="width:160px;" class="sub-total red td">
                                        ${data[i].price}
                                    </div>
                                    <div style="width:100px;" class="cart-operation td">
                                        <span class="cart-del-btn" data-role="cart-del-btn">删除</span>
                                        <span class="cart-col-btn" data-role="cart-mov2fav-btn">移入收藏</span>
                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>`;
                }

                $("#pool-box").append(template);
            }

            $(".select-num .ins").text(totalNum);
            $(".price-sum .sum strong").text("￥ " + totalPrice)
        }


        getCar();

        $(".cart-num-cont input").click(function () {
            $(this).removeAttr("readonly");
        }).blur(function () {
            $(this).attr("readonly","readonly")
        })

            // .on("click",function () {
            //     $(this).attr("readonly","");
            // },"blur",function () {
            //     $(this).attr("readonly","readonly")
            // })

    });


</script>
</body>
</html>
